syntax = "proto3";

service P2PSync{
    rpc GetPeerList(Empty) returns (stream PeerList) {}
    rpc ListenCommands(Peer) returns (stream DatabaseCommand) {}
    rpc Connect(Peer) returns (Empty) {}
    rpc Heartbeat(Empty) returns (Empty) {}
}

message Empty {
}

message PeerList {
    repeated Peer peers = 1;
}

message Peer {
    string host = 1;
    string port = 2;
}

message DatabaseCommand {
    int32 timestamp = 1;
    string command = 2;
}
